<!DOCTYPE html>
<html id="html" lang="zh-cmn-Hans">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
<meta name="description" content="不超过150个字符"/>
<meta name="keywords" content="不超过80个字符"/>
<meta name="author" content="name, sycbbb@sina.com"/>
<meta name="robots" content="index,follow"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
<meta name="format-detection" content="telephone=no, email=no,adress=no"/>
<meta name="msapplication-tap-highlight" content="no">
<link rel="stylesheet" href="styles/index.css">
<title></title>
</head>
<body>
<div class="wrapper shopping-cart-wrapper">
	<header class="header">
		<div class="content-wrapper">
			<div class="avatar">
			<img src="http://static.galileo.xiaojukeji.com/static/tms/seller_avatar_256px.jpg" alt="">
			</div>
			<div class="content">
				<div class="title"><span class="brand">品牌</span><span>粥品香坊（回龙观）</span></div>
				<div class="description">蜂鸟专送/38分钟送达</div>
				<div class="support">
					<span class="decrease">减</span><span class="text">在线支付满28减5</span>
				</div>
			</div>
			<div class="supports-count dossen-arrow-right">
				<span class="count">5个</span>
			</div>
		</div>
		<div class="bulletin-wrapper">
			<span class="bulletin-title">公告</span>
			<span class="bulletin-text">粥品香坊其烹饪粥料的秘方源于中国千年古法，在融和现代制作工艺，由世界烹饪大师屈浩先生领衔研发。坚守纯天然、0添加的良心品质深得消费者青睐，发展至今成为粥类的引领品牌。是2008年奥运会和2013年园博会指定餐饮服务商。</span>
		</div>
	</header>
	<div class="tab">
		<div class="tab-item">
			<a href="#/goods" class="active">商品</a>
		</div>
	</div>
	<div class="list">
		<div class="menu-wrapper">
			<ul>
				<li class="current">
					<span class="text">
						<span class="icon"></span>
						热销榜
					</span>
				</li>
				<li>
					<span class="text">
						<span class="icon"></span>
						精选热菜
					</span>
				</li>
			</ul>
		</div>
		<div class="foods-wrapper">
			<ul>
				<li>
					<h2 class="title">热销榜</h2>
					<ul>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>15</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>15</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
					</ul>
				</li>
				<li>
					<h2 class="title">单人精彩套餐</h2>
					<ul>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
						<li class="food-item">
							<div class="img"><img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/114/h/114" alt=""></div>
							<div class="content">
								<h3 class="name">皮蛋瘦肉粥</h3>
								<p class="desc">咸粥</p>
								<div class="extra">
									<span class="count">月售229</span>
									<span class="count">好评100</span>
								</div>
								<div class="price">
									<span class="now">￥<em>10</em></span>
									<span class="old">￥36</span>
								</div>
								<div class="cartControl-wrapper">
									<div class="cart-decrease">
										<span class="iconfont icon-jian"></span>
										<span class="cart-count">0</span>
										<span class="iconfont cart-add"></span>
									</div>
								</div>
							</div>
						</li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
	<div class="shopCart">
		<div class="content">
			<div class="content-left">
				<div class="logo-wrapper">
					<div class="logo">
						<i><img src="images/cart.png" alt=""></i>
					</div>
					<div class="num">0</div>
				</div>
				<div class="price">￥<em>0</em></div>
				<div class="desc">另需配送费￥4元</div>
			</div>
			<div class="content-right"><div class="pay not-enough">￥<em>20</em>元起送</div></div>
		</div>
	</div>
</div>
<div class="detail">
	<h2>粥品香坊（回龙观）</h2>
	<div class="title">
		<div class="line"></div>
		<div class="text">商家公告</div>
		<div class="line"></div>
	</div>
	<div class="bulletin">
		<p>粥品香坊其烹饪粥料的秘方源于中国千年古法，在融和现代制作工艺，由世界烹饪大师屈浩先生领衔研发。坚守纯天然、0添加的良心品质深得消费者青睐，发展至今成为粥类的引领品牌。是2008年奥运会和2013年园博会指定餐饮服务商。</p>
	</div>
	<div class="detail-close">
		<i><img src="images/info_close.png" alt=""></i>
	</div>
</div>
<div class="detail-info">
	<div class="image-header">
		<img src="http://fuss10.elemecdn.com/c/cd/c12745ed8a5171e13b427dbc39401jpeg.jpeg?imageView2/1/w/750/h/750" alt="">
		<div class="back"><i class="dossen-header-left"></i></div>
	</div>
	<div class="content">
		<h2>皮蛋瘦肉粥</h2>
		<div class="detail-text"><span>月售229份</span></div>
		<div class="price">
			<span class="now">￥<em>15</em></span>
			<span class="old">￥36</span>
		</div>
		<div class="cartControl-wrapper">
			<div class="cart-decrease">
				<span class="iconfont icon-jian"></span>
				<span class="cart-count">0</span>
				<span class="iconfont cart-add"></span>
			</div>
		</div>
		<div class="buy">加入购物车</div>
	</div>
	<div class="info">
		<h2>商品信息</h2>
		<p>一碗皮蛋瘦肉粥，总是我到粥店时的不二之选。香浓软滑，饱腹暖心，皮蛋的Q弹与瘦肉的滑嫩伴着粥香溢于满口，让人喝这样的一碗粥也觉得心满意足</p>
	</div>
</div>
<script src="plugins/jquery-3.1.0.min.js"></script>
<script>
	$(document).ready(function(){
		var listH=($(".header").outerHeight())+($(".tab").outerHeight());
		$(".list").css("padding-top",listH);
		$(".menu-wrapper").css("top",listH);
		var headerH=$(".header").outerHeight();
		$(".tab").css("top",headerH);
        //点击左边列表
		$(".menu-wrapper ul li").on("click",function(){
			$(this).addClass("current").siblings().removeClass("current");
			$(".foods-wrapper>ul>li").eq($(this).index()).offset().top;
			var pos=$(".foods-wrapper>ul>li").eq($(this).index()).offset().top-listH;
			$("html,body").animate({scrollTop: pos}, 1000);
			return false;
		});
		//右边滚动
		$(window).scroll(function(){
			var sctop=$(this).scrollTop();
			$(".foods-wrapper>ul>li").each(function(index,element){
				var park=$(this).offset().top-sctop;
				if(park<listH && park>=0){
				    $(".menu-wrapper ul li").removeClass('current');
				    var inde=$(this).index();
				    $(".menu-wrapper ul li:eq("+inde+")").addClass('current');
			    }
			});
		});
		//点击详情
		$(".supports-count,.bulletin-wrapper").on("click",function(){
			$(".detail").css("transform","scale(1.5)");
			setTimeout(function(){
				$(".detail").css("transform","scale(1)");
			},150)
		});
		$(".detail,.detail-close").on("click",function(){
			$(".detail").css("transform","scale(1.5)");
			setTimeout(function(){
				$(".detail").css("transform","scale(0)");
			},150)
		});

        //点击+ -
		var cartCount,numAll,moneyAll,jianAll,jAll;
		$(".cart-add").on("click",function(e){	
			e.stopPropagation();
			cartCount=$(this).prev().text();
			cartCount++;
			if(cartCount>0){
				$(this).prev().css("display","inline-block");
				$(this).prev().prev().css("display","inline-block");
			}
			$(this).prev().text(cartCount);
			count();
		});
		$(".icon-jian").on("click",function(e){
			e.stopPropagation();
			cartCount=$(this).next().text();
			cartCount--;
			if(cartCount==0){
				$(this).hide();
				$(this).next().hide();
			}
			$(this).next().text(cartCount);
			count();
		});


		//点击右边列表
		$(".food-item").on("click",function(){
			$(".detail-info").addClass("detail-info-active");
			$(".shopping-cart-wrapper").css({
				height:"100%"
			})
		});
		$(".detail-info .image-header .back").on("click",function(){
			$(".detail-info").removeClass("detail-info-active");
			$(".shopping-cart-wrapper").css({
				height:"auto"
			})
		});
		$(".detail-info .content .buy").on("click",function(){
			$(this).hide();
			$(this).prev().show();

			//切换添加1
			cartCount=$(this).prev().find(".cart-count").text();
			cartCount++;
			if(cartCount>0){
				$(this).prev().find(".cart-count").css("display","inline-block");
				$(this).prev().find(".cart-count").prev().css("display","inline-block");
			}
			$(this).prev().find(".cart-count").text(cartCount);
			infoCount();
		});
		$(".detail-info .icon-jian").on("click",function(){
			if(cartCount==0){
				$(this).parent().parent().next().show();
				$(this).parent().parent().hide();
			}
			infoCount();
		});
		$(".detail-info .cart-add").on("click",function(){
			infoCount();
		});
		

		function count(){
			numAll = 0;
			moneyAll = 0;
			jianAll=$(".shopCart .pay em").text();
			$(".food-item .cart-count").each(function(index,element){   	    
				numAll += parseInt($(element).text()); 
				moneyAll += parseInt($(element).text()*$(this).parents(".cartControl-wrapper").prev().find(".now em").text())
			});
			$(".shopCart .num").text(numAll);
			$(".shopCart .price em").text(moneyAll);
            
            jAll=jianAll-moneyAll;
			if(jianAll>moneyAll && moneyAll!=0){	
				$(".shopCart .pay em").text(jAll);
				$(".shopCart .pay").removeClass("enough").html("还差￥<em>"+jAll+"</em>元起送");
			}else if(jianAll<moneyAll){
				$(".shopCart .pay").addClass("enough").html("去结算");
			}else if(moneyAll==0){
				$(".shopCart .pay").removeClass("enough").html("￥<em>20</em>元起送");
			}

			if(numAll>0){
				$(".shopCart .num").show();
				$(".shopCart .logo").addClass("active");
			}else{
				$(".shopCart .num").hide();
				$(".shopCart .logo").removeClass("active");
			}
		}

		function infoCount(){
			numAll = 0;
			moneyAll = 0;
			jianAll=$(".shopCart .pay em").text();
			$(".detail-info .cart-count").each(function(index,element){   	    
				numAll += parseInt($(element).text()); 
				moneyAll += parseInt($(element).text()*$(this).parents(".cartControl-wrapper").prev().find(".now em").text())
			});
			$(".shopCart .num").text(numAll);
			$(".shopCart .price em").text(moneyAll);
            
            jAll=jianAll-moneyAll;
			if(jianAll>moneyAll && moneyAll!=0){	
				$(".shopCart .pay em").text(jAll);
				$(".shopCart .pay").removeClass("enough").html("还差￥<em>"+jAll+"</em>元起送");
			}else if(jianAll<moneyAll){
				$(".shopCart .pay").addClass("enough").html("去结算");
			}else if(moneyAll==0){
				$(".shopCart .pay").removeClass("enough").html("￥<em>20</em>元起送");
			}

			if(numAll>0){
				$(".shopCart .num").show();
				$(".shopCart .logo").addClass("active");
			}else{
				$(".shopCart .num").hide();
				$(".shopCart .logo").removeClass("active");
			}
		}
		
	});
</script>
</body>
</html>